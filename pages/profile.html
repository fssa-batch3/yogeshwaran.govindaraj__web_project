<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
    <link rel="stylesheet" href="../assest/css/profile.css" />
</head>

<body>
    <header>
        <!-- <button id="delete">Delete</button>
        <button id="logout" click="logout" type="button">
            <span class="glyphicon glyphicon-log-out"></span> Log out
        </button>
    </header> -->



        <form class="main" id="form">

            <div>
                <img id="pro" src="" alt="" width="50px">
            </div>

            <a href="./calenderdemo.html">
                <p class="arrow"> &larr;</p>
            </a>

            <div class="form" id="form">
                <label>Upload photo :</label>
                <input class="input" id="img" type="url" placeholder="Add photo url" required /><br><br>
                <!-- <img src="https://ca.slack-edge.com/T032648LE-U04291URDLH-f74388fdc584-512" width="200px" id="img"
                    alt="user_img"><br><br> -->

                <label for="User name">User name :</label>
                <input id="name" class="input" placeholder="User Name" /><br><br>


                <label for="ph no">Phone Number :</label>
                <input id="Phone_Number" class="input" placeholder="Phone Number" maxlength="10" /><br><br>

                <label for="email">Your Email :</label>
                <input id="Email" class="input" placeholder="Email" /><br><br>

                <label for="subject">Home Address:</label><br>
                <textarea id="address" name="subject" placeholder="fill address" rows="3" cols="30"
                    required></textarea><br><br>

                <button type="submit">SUBMIT</button>
                <!-- <a href="./calenderdemo.html"><button>Back</button></a> -->
            </div>
        </form>





        <script>


            const oneUser = JSON.parse(localStorage.getItem("user_login"));
            console.log(oneUser)
            const user_info = JSON.parse(localStorage.getItem("newuserInfo"))
            console.log(user_info)
            // console.log(user_info)
            let select_user = user_info.find((e) => e["Email"] == oneUser)

            console.log(select_user)



            const img = document.getElementById("img");
            console.log(img)
            const name = document.getElementById("name");
            const Phone_Number = document.getElementById("Phone_Number");
            const email = document.getElementById("Email");
            const address = document.getElementById("address")
            console.log("yogesh");
            // Compare the values

            console.log(select_user)

            // console.log(select_user['pic'])
            img.value = select_user["pic"] || "";
            name.value = select_user["FullName"]
            Phone_Number.value = select_user["Phone_number"]
            email.value = select_user["Email"]
            address.value = select_user["subject"] || "";

            let profile = document.getElementById("pro")
            profile.setAttribute("src", select_user["pic"])


            // to replace the values
            const form = document.getElementById("form");
            form.addEventListener("submit", function (event) {
                event.preventDefault();

                // let input_div = document.getElementById("img").value;
                let pic = document.getElementById("img").value;
                let FullName = document.getElementById("name").value;
                let Phone_number = document.getElementById("Phone_Number").value;
                let Email = document.getElementById("Email").value;
                let subject = document.getElementById("address").value;




                let newData = {
                    pic,
                    FullName,
                    Phone_number,
                    Email,
                    subject,
                };


                // assign the value to

                const combineData = Object.assign(select_user, newData);
                // console.log(combineData);
                alert("success fully changed your profile");

                let findIndex = user_info.indexOf(select_user);
                user_info[findIndex] = combineData;
                localStorage.setItem("newuserInfo", JSON.stringify(user_info));
                // window.location.href = "/pages/profile.html";
                // window.history.back();
            });



        </script>



</body>

</html>