<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <link rel="stylesheet" href="../assest/css/calendar demo.css    ">


    <title>calendar</title>


</head>

<body>
    <header>
        <a href="./user booking  list.html"><button class="History">History</button></a>
        <a href="./leaderborad.html"><button class="booking">booking day</button></a>
        <a href="./pick.html"><button class="pick">Pick me</button></a>
        <a href="./profile.html"><img class="image" src="../assest/image/profile.png" width="50px"></a>
    </header>

    <div class="wrapper">
        <header>
            <P class="current-date">March 2023</P>
            <!-- <a href="#"><img src="./external-less-than-multimedia-line-30px-ios-line-2px-amoghdesign.png"></a>
            <a href="#"><img src="./more-than.png"></a> -->


            <div class="icons">
                <!-- <img src="./greate_download-removebg-preview.png"> -->
                <span id="prev" class="fa-solid fa-less-than"></span>
                <span id="next" class="fa-solid fa-greater-than"></span>

            </div>
        </header>
        <div class="calendar">
            <ul class="weeks">
                <li>Sun</li>
                <li>Mon</li>
                <li>Tue</li>
                <li>Wed</li>
                <li>Thu</li>
                <li>Fri</li>
                <li>Sat</li>
            </ul>

            <ul class="days">
                <!-- <li class="inactive">28</li>
                <li class="inactive">29</li>
                <li class="inactive">30</li>
                <li class="inactive">31</li>
                <li>1</li>
                <li>2</li>
                <li>3</li>
                <li>4</li>
                <li>5</li>
                <li>6</li>
                <li>7</li>
                <li>8</li>
                <li>9</li>
                <li>10</li>
                <li>11</li>
                <li>12</li>
                <li>13</li>
                <li>14</li>
                <li>15</li>
                <li>16</li>
                <li>17</li>
                <li>18</li>
                <li>19</li>
                <li class="active">20</li>
                <li>21</li>
                <li>22</li>
                <li>23</li>
                <li>24</li>
                <li>25</li>
                <li>26</li>
                <li>27</li>
                <li>28</li>
                <li>29</li>
                <li>30</li>
                <li class="inactive">1</li> -->
            </ul>
            <a href="./pick.html"><button class="btn">Pick Me</button></a>

        </div>
    </div>



    <!-- script -->

    <script>
        const currentdate = document.querySelector(".current-date"),
            daysTag = document.querySelector(".days"),
            prevNextIcon = document.querySelectorAll(".icons span");
        // getting new date//

        let date = new Date(),
            currYear = date.getFullYear(),
            currMonth = date.getMonth();

        const month = ["January", "February", "March", "April", "May", "June", "July",
            "August", "September", "October", "November", "December"]



        const renderCalendar = () => {
            // last date of month//
            let firstDateofMonth = new Date(currYear, currMonth, 1).getDay(),//getting first day
                lastDateofMonth = new Date(currYear, currMonth + 1, 0).getDate(),//getting last date
                lastDayofMonth = new Date(currYear, currMonth, lastDateofMonth).getDay(),//getting last day
                lastDateofLastMonth = new Date(currYear, currMonth, 0).getDate();//getting last pervious date
            let liTag = "";

            for (let i = firstDateofMonth; i > 0; i--) {
                liTag += `<li class="inactive">${lastDateofLastMonth - i + 1}</li>`
            }


            for (let i = 1; i <= lastDateofMonth; i++) {
                //adding active current day 
                let isToday = i === date.getDate() && currMonth === new Date().getMonth()
                    && currYear === new Date().getFullYear() ? "active" : "";
                // liTag += `<li class="${isToday}">${i}</li>`

                const urlParams = new URLSearchParams(window.location.search);
                const selectedDate = new Date(urlParams.get("date"));
                console.log("The selected date is " + selectedDate.toString());

                // passing the code 

                let isSelectedDate = i === selectedDate.getDate() && currMonth === selectedDate.getMonth()
                    && currYear === selectedDate.getFullYear() ? "active" : "";
                liTag += `<li class="${isSelectedDate}">${i}</li>`
            }

            for (let i = lastDayofMonth; i < 6; i++) {
                liTag += `<li class="inactive">${i - lastDayofMonth + 1}</li>`
            }

            currentdate.innerText = `${month[currMonth]} ${currYear}`;
            daysTag.innerHTML = liTag;
        }
        renderCalendar();

        prevNextIcon.forEach(icon => {
            icon.addEventListener("click", () => {
                currMonth = icon.id === "prev" ? currMonth - 1 : currMonth + 1;

                if (currMonth < 0 || currMonth > 11) {

                    //new date an year pass
                    date = new Date(currYear, currMonth);
                    currYear = date.getFullYear();//new year
                    currMonth = date.getMonth();//new date month
                } else {
                    date = new Date();
                }
                renderCalendar();
            });
        });


        function pass() {
            window.location.href = "/pages/pick.html"
        }

        function pass() {
            window.location.href = "/pages/user booking  list.html"
        }




    </script>

    <a href="../pages/user booking  list.html"></a>
</body>

</html>